---
name: bug-fix
description: バグ調査→修正→検証→PRを一連で実行する。「bug-fix」「バグ修正」などの依頼時に使用。
allowed-tools: Bash, Read, Edit, Write, Glob, Grep, Task, Skill, WebSearch, WebFetch
user-invocable: true
argument-hint: "<バグの説明や要望>"
---

# バグ修正スキル (`/bug-fix`)

バグの調査→修正→検証→PRまでを一連で実行する。

## 引数: $ARGUMENTS

- バグの説明や要望をテキストで受け取る（必須）

## ワークフロー概要

```
ユーザー要望 → 調査 → 修正 → 検証 → [FAILなら再修正 → ループ] → PR → 完了
```

## 実行手順

---

### Phase 1: バグ調査

1. ユーザーの要望 `$ARGUMENTS` を分析し、バグの概要をまとめる
2. Glob, Grep, Read ツールを使ってコードベースを調査し、原因を特定する
3. 調査結果をユーザーに報告する:
   - 原因の特定
   - 影響範囲
   - 修正方針

---

### Phase 2: バグ修正

1. 調査結果をもとに修正方針を立てる
2. Edit, Write ツールでコードを変更する
3. 修正内容をユーザーに報告する

---

### Phase 3: 動作検証

1. `Skill` ツールで `verify` スキルを実行して動作確認する
2. テスト結果を確認する

---

### Phase 4: テスト結果判定

**全ステップ PASS の場合:**
- Phase 5 へ進む

**FAIL がある場合:**
1. 失敗内容を分析し、追加修正を行う
2. Phase 3 に戻る（修正→検証ループ）

**ループ上限:** 修正→検証ループは最大3回まで。3回失敗したら停止してユーザーに報告する。

---

### Phase 5: PR作成

1. `Skill` ツールで `pr` スキルを実行する

---

### Phase 6: 完了報告

以下の情報をサマリーとして出力する:

```
═══════════════════════════════════════════
  Bug Fix Complete
═══════════════════════════════════════════
  Bug:        {バグの概要}
  Root Cause: {原因の概要}
  Fix:        {修正内容の概要}
  Verify:     PASS ({何回目の検証で通ったか})
  PR:         {PR番号とURL}
═══════════════════════════════════════════
```
